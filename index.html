<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rise of EVs & Environmental Impact</title>
    <style>
        /* Base Styles */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f7fa;
            color: #333;
            margin: 0;
            padding: 0;
        }

        header {
            color: black;
            text-align: center;
            padding: 80px 20px;
        }

        header h1 {
            font-size: 4rem;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin: 60px 0 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .content-section {
            margin-bottom: 60px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .chart {
            text-align: center;
        }
    </style>
</head>
<body>

    <header>
        <h1>Rise of EVs & Their Environmental Impact</h1>
    </header>

    <div class="container">
        <!-- Section 1: Rise of EV -->
        <div class="section-title">Rise of EV</div>
        <div class="content-section">
            <p>The rise of Electric Vehicles (EVs) marks a transformative era in transportation.</p>
            <div id="rise-ev-chart" class="chart"></div>
        </div>

        <!-- Section 2: Environmental Impact -->
        <div class="section-title">Environmental Impact</div>
        <div class="content-section">
            <p>EVs significantly reduce greenhouse gas emissions compared to traditional vehicles.</p>
            <div id="environment-impact-chart" class="chart"></div>
        </div>

        <!-- Section 3: Heat Map and Scatter Plot -->
        <div class="section-title">Heat Map and Scatter Plot</div>
        <div class="content-section">
            <p>Visualizing data through heat maps and scatter plots provides insights into EV adoption trends.</p>
            <div id="heatmap-chart" class="chart"></div>
        </div>

        <!-- Section 4: Emissions of Battery Production -->
        <div class="section-title">Emissions of Battery Production</div>
        <div class="content-section">
            <p>The production of EV batteries contributes to emissions due to mining and processing raw materials.</p>
            <div id="battery-emissions-chart" class="chart"></div>
        </div>
    </div>

    <footer>
        <p>Conclusion: Environmental cost of battery production should also be considered.</p>
    </footer>

    <!-- Load D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        // Section 1: Rise of EV Visualization
        d3.csv("ev_rise.csv").then(data => {
            const svg = d3.select("#rise-ev-chart").append("svg")
                          .attr("width", 600)
                          .attr("height", 400);
            const margin = {top: 40, right: 20, bottom: 50, left: 60};
            const width = 600 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;

            const g = svg.append("g")
                         .attr("transform", `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand().domain(data.map(d => d.Year))
                        .range([0, width]).padding(0.1);
            const y = d3.scaleLinear().domain([0, d3.max(data, d => +d.Sales)])
                        .range([height, 0]);

            g.append("g").attr("transform", `translate(0,${height})`)
             .call(d3.axisBottom(x));

            g.append("g").call(d3.axisLeft(y));

            g.selectAll(".bar")
             .data(data).enter().append("rect")
             .attr("class", "bar")
             .attr("x", d => x(d.Year))
             .attr("y", d => y(d.Sales))
             .attr("width", x.bandwidth())
             .attr("height", d => height - y(d.Sales));
        });

        // Section 2: Environmental Impact Visualization
        d3.csv("environmental_impact.csv").then(data => {
            const svg = d3.select("#environment-impact-chart").append("svg")
                          .attr("width", 600)
                          .attr("height", 400);

            const margin = {top: 40, right: 20, bottom: 50, left: 60};
            const width = 600 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;

            const g = svg.append("g")
                         .attr("transform", `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand().domain(data.map(d => d.Year))
                        .range([0, width]).padding(0.1);
            const y = d3.scaleLinear().domain([0, d3.max(data, d => +d.CO2_Reduction)])
                        .range([height, 0]);

            g.append("g").attr("transform", `translate(0,${height})`)
             .call(d3.axisBottom(x));

            g.append("g").call(d3.axisLeft(y));

            g.selectAll(".line")
             .data(data).enter().append("circle")
             .attr("cx", d => x(d.Year) + x.bandwidth() / 2)
             .attr("cy", d => y(d.CO2_Reduction))
             .attr("r", 5);
        });

        // Section 3: Heat Map and Scatter Plot Visualization
        d3.csv("heatmap_scatter.csv").then(data => {
            const svg = d3.select("#heatmap-chart").append("svg")
                          .attr("width", 600)
                          .attr("height", 400);

            console.log("Heatmap data loaded.");
        });

        // Section 4: Battery Emissions Visualization
        d3.csv("Dev 1/datasets/battery_emissions_dataset.csv").then(data => {
            const svg = d3.select("#battery-emissions-chart").append("svg")
                          .attr("width", 600)
                          .attr("height", 400);

            console.log("Battery Emissions data loaded.");
        });
    </script>
</body>
</html>
