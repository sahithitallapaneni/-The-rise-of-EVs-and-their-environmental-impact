<!-- Section 4: Emissions of Battery Production -->
<div class="section-title">Emissions of Battery Production</div>
<div class="content-section">
    <p>The production of EV batteries contributes to emissions, primarily due to mining and processing raw materials like lithium and cobalt. Efforts are ongoing to make this process more sustainable.</p>
    <div id="bar-chart"></div> <!-- Chart container added here -->
</div>

<footer>
    <p>Conclusion: Environmental cost of battery production should also be taken into consideration</p>
</footer>

</div> <!-- Closing main container div -->

<!-- Insert the D3.js script here -->
<script>
    d3.csv("Dev 1/datasets/battery_emissions_dataset.csv").then(function(data) {
        const svg = d3.select("#bar-chart")
                      .append("svg")
                      .attr("width", 600)
                      .attr("height", 400);

        const margin = { top: 40, right: 20, bottom: 50, left: 60 };
        const width = 600 - margin.left - margin.right;
        const height = 400 - margin.top - margin.bottom;

        const g = svg.append("g")
                     .attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3.scaleBand()
                    .domain(data.map(d => `${d.Country} - ${d['Battery Type']}`))
                    .range([0, width])
                    .padding(0.1);

        const y = d3.scaleLinear()
                    .domain([0, d3.max(data, d => +d['Total Emissions'])])
                    .range([height, 0]);

        g.append("g")
         .attr("transform", `translate(0,${height})`)
         .call(d3.axisBottom(x).tickSize(0));

        g.append("g").call(d3.axisLeft(y));

        g.selectAll(".bar")
         .data(data)
         .enter().append("rect")
         .attr("class", "bar")
         .attr("x", d => x(`${d.Country} - ${d['Battery Type']}`))
         .attr("y", d => y(+d['Total Emissions']))
         .attr("width", x.bandwidth())
         .attr("height", d => height - y(+d['Total Emissions']));
    });
</script>
